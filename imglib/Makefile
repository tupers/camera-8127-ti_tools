#############################################################################
# Makefile                                                                  #
#                                                                           #
# Top-level make for C64P_IMGLIB                                            #
#############################################################################
#
#
#############################################################################
#                                                                           #
#   Copyright (C) 2010 Texas Instruments Incorporated                       #
#     http://www.ti.com/                                                    #
#                                                                           #
#############################################################################

include Rules.make


.PHONY:	all clean imglib src lib src_clean lib_clean install

#==============================================================================
# The default build target.
#==============================================================================
all:	imglib

#==============================================================================
# Clean up the targets built by 'make all'.
#==============================================================================
clean:	imglib_clean 
#==============================================================================
# Build everything rebuildable.
#==============================================================================
everything: all

#==============================================================================
# Clean up all targets.
#==============================================================================
clobber:    clean

#==============================================================================
# A help message target.
#==============================================================================
help:
	@echo
	@echo "Available build targets are:"
	@echo
	@echo "    all             : Build the components below"
	@echo "    clean           : Remove files generated by the 'all' target"
	@echo
	@echo "    imglib          : Build imglib library and drivers projects for $(BUILD_TYPE)"
	@echo "    src             : Build driver projects for $(BUILD_TYPE)"
	@echo "    lib             : Build imglib library"
	@echo
	@echo "    src_clean       : Clean driver projects "
	@echo "    lib_clean       : Clean library projects "
	@echo 
	@echo "    install         : Install binaries to $(EXEC_DIR)"
	@echo

#==============================================================================
# Target for listing information about the dependent components.
#==============================================================================
info:	check
	@CODEGEN_INSTALL_DIR="$(CODEGEN_INSTALL_DIR)" 

#==============================================================================
# Target for checking that the Rules.make file is set up properly.
#==============================================================================
check:
	@CHECKLIST="$(CHECKLIST)" $(DVSDK_INSTALL_DIR)/bin/check.sh

#==============================================================================
# Build the codec servers for the configured platform. Also, an
# explicit cleanup target is defined.
#==============================================================================
src:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/test_drivers/drivers

src_clean:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/test_drivers/drivers clean
	
lib:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/build

lib_clean:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/build clean

imglib:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/build
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/test_drivers/drivers

imglib_clean:
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/build clean
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/test_drivers/drivers clean	

install:
	@echo
	@echo Creating $(EXEC_DIR)
	@install -d $(EXEC_DIR)
	$(MAKE) -C $(IMGLIB_INSTALL_DIR)/test_drivers/drivers install
	



